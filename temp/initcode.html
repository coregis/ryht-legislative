<html>
	<head>
		<title>init code test</title>
	</head>
	<body>
		<h1>Init code test</h1>
		<script>

			function getUrlVars() {
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
						vars[key] = value;
				});
				return vars;
			}

			var urlParams = getUrlVars();

			if (urlParams["success"] && urlParams["success"] === "yes") {
				document.write("<h3>Success!</h3>");
				document.write("<img src='yes.jpg' />");
			}
			else if (urlParams["success"]) {
				document.write("<h3>Correct URL parameter present, but with wrong value</h3>");
				document.write("<img src='no.jpg' />");
				document.write("<p>Hint: the value for argument <b>success</b> should be <b>yes</b>, unquoted.");
			}
			else if (Object.keys(urlParams).length > 0) {
				document.write("<h3>A URL parameter was detected, but not the right one</h3>");
				document.write("<img src='no.jpg' />");
				document.write("<p>Hint: argument name should be <b>success</b>, value should be <b>yes</b>");
			}
			else {
				document.write("<h3>No URL parameter detected at all</h3>");
				document.write("<img src='no.jpg' />");
				document.write("<p>Hint: argument name should be <b>success</b>, value should be <b>yes</b>");
			}

		</script>
	</body>
</html>
